import{a as $,r as a,j as e,b as E}from"./index-BZIbSz_R.js";const I=({roomId:r="default",userName:g="Anonymous",maxMessages:m=100,showOnlineUsers:y=!0,className:o=""})=>{const{messages:c,sendMessage:u,onlineUsers:n,isTyping:v,sendTypingIndicator:l,joinRoom:S,leaveRoom:C,isConnected:d}=$(),[h,k]=a.useState([]),[f,j]=a.useState(""),[R,b]=a.useState(!1),T=a.useRef(null),p=a.useRef();a.useEffect(()=>{d&&S(r)},[d,r,S]),a.useEffect(()=>()=>{d&&C(r)},[d,r,C]),a.useEffect(()=>{const t=c.filter(x=>x.data?.roomId===r||!r).map(x=>({id:x.id,userId:x.data?.userId||"system",userName:x.data?.userName||"System",message:x.message,timestamp:x.timestamp,isOwn:x.data?.userId==="current-user"})).slice(-m);k(t)},[c,r,m]),a.useEffect(()=>{T.current?.scrollIntoView({behavior:"smooth"})},[h]);const s=t=>{j(t.target.value),R||(b(!0),l(!0)),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{b(!1),l(!1)},1e3)},i=t=>{t.preventDefault(),!(!f.trim()||!d)&&(u({type:"info",message:f,data:{roomId:r,userId:"current-user",userName:g,messageType:"chat"}}),j(""),b(!1),l(!1),p.current&&clearTimeout(p.current))},w=t=>new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),N=()=>Object.entries(v).filter(([t,x])=>x&&t!=="current-user").map(([t])=>n.find(D=>D.id===t)?.name||"Someone");return e.jsxs("div",{className:`flex flex-col h-full bg-gray-900 border border-gray-700 rounded-lg ${o}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-gray-800 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${d?"bg-green-500":"bg-red-500"}`}),e.jsx("h3",{className:"text-white font-semibold",children:"Real-time Chat"}),r!=="default"&&e.jsxs("span",{className:"text-xs text-gray-400",children:["#",r]})]}),y&&e.jsxs("div",{className:"text-xs text-gray-400",children:[n.length," online"]})]}),e.jsxs("div",{className:"flex flex-1 min-h-0",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[h.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:e.jsx("p",{children:"No messages yet. Start the conversation!"})}):h.map(t=>e.jsx("div",{className:`flex ${t.isOwn?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${t.isOwn?"bg-red-600 text-white":"bg-gray-700 text-gray-100"}`,children:[!t.isOwn&&e.jsx("div",{className:"text-xs text-gray-300 mb-1",children:t.userName}),e.jsx("div",{className:"text-sm",children:t.message}),e.jsx("div",{className:`text-xs mt-1 ${t.isOwn?"text-red-200":"text-gray-400"}`,children:w(t.timestamp)})]})},t.id)),N().length>0&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"bg-gray-700 text-gray-300 px-4 py-2 rounded-lg text-sm italic",children:[N().join(", ")," ",N().length===1?"is":"are"," typing..."]})}),e.jsx("div",{ref:T})]}),e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("form",{onSubmit:i,className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:f,onChange:s,placeholder:d?"Type a message...":"Connecting...",disabled:!d,className:"flex-1 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500 disabled:opacity-50"}),e.jsx("button",{type:"submit",disabled:!f.trim()||!d,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Send"})]})})]}),y&&e.jsxs("div",{className:"w-48 border-l border-gray-700 bg-gray-800 p-4",children:[e.jsx("h4",{className:"text-white font-semibold mb-3 text-sm",children:"Online Users"}),e.jsx("div",{className:"space-y-2",children:n.length===0?e.jsx("p",{className:"text-gray-500 text-xs",children:"No users online"}):n.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-gray-300 text-sm truncate",children:t.name})]},t.id))})]})]})]})},M=({showMetrics:r=!0,showConnectionInfo:g=!0,refreshInterval:m=5e3,className:y=""})=>{const{socket:o,isConnected:c,emit:u,on:n,off:v}=E(),[l,S]=a.useState({cpu:0,memory:0,uptime:0,activeConnections:0,requestsPerSecond:0}),[C,d]=a.useState(new Date),[h,k]=a.useState({latency:0,protocol:"",transport:""}),f=()=>{c&&u("get_metrics")},j=()=>{if(c&&o){u("ping");const s=Date.now();o.once("pong",()=>{const i=Date.now()-s;k({latency:i,protocol:o.io.engine.protocol,transport:o.io.engine.transport.name})})}};a.useEffect(()=>o?(n("metrics",i=>{S(i),d(new Date)}),()=>{v("metrics")}):void 0,[o,n,v]),a.useEffect(()=>{if(!r)return;f();const s=setInterval(f,m);return()=>clearInterval(s)},[r,m,c]),a.useEffect(()=>{if(!g)return;j();const s=setInterval(j,m);return()=>clearInterval(s)},[g,m,c]);const R=(s,i)=>s>=i.critical?"text-red-500":s>=i.warning?"text-yellow-500":"text-green-500",b=(s,i)=>(s>=i.critical||s>=i.warning,""),T=s=>{const i=Math.floor(s/86400),w=Math.floor(s%86400/3600),N=Math.floor(s%3600/60);return i>0?`${i}d ${w}h`:w>0?`${w}h ${N}m`:`${N}m`},p=s=>s<100?`${s}ms`:s<1e3?`${(s/1e3).toFixed(1)}s`:`${(s/1e3).toFixed(2)}s`;return e.jsxs("div",{className:`bg-gray-900 border border-gray-700 rounded-lg p-4 ${y}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold text-sm",children:"System Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-xs text-gray-400",children:c?"Connected":"Disconnected"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-gray-300 font-medium text-xs uppercase tracking-wide",children:"Connection"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Latency"}),e.jsx("span",{className:`text-xs font-mono ${h.latency>1e3?"text-red-400":h.latency>500?"text-yellow-400":"text-green-400"}`,children:p(h.latency)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Protocol"}),e.jsx("span",{className:"text-gray-300 text-xs",children:h.protocol})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Transport"}),e.jsx("span",{className:"text-gray-300 text-xs capitalize",children:h.transport})]})]})]}),r&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-gray-300 font-medium text-xs uppercase tracking-wide",children:"Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"CPU Usage"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-xs font-mono ${R(l.cpu,{warning:70,critical:90})}`,children:[l.cpu.toFixed(1),"%"]}),e.jsx("span",{className:"text-xs",children:b(l.cpu,{warning:70,critical:90})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Memory Usage"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`text-xs font-mono ${R(l.memory,{warning:80,critical:95})}`,children:[l.memory.toFixed(1),"%"]}),e.jsx("span",{className:"text-xs",children:b(l.memory,{warning:80,critical:95})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Uptime"}),e.jsx("span",{className:"text-gray-300 text-xs font-mono",children:T(l.uptime)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Active Connections"}),e.jsx("span",{className:"text-gray-300 text-xs font-mono",children:l.activeConnections})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Requests/sec"}),e.jsx("span",{className:"text-gray-300 text-xs font-mono",children:l.requestsPerSecond.toFixed(1)})]})]})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"Last Update"}),e.jsx("span",{className:"text-gray-400 text-xs",children:C.toLocaleTimeString()})]})}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:()=>{r&&f(),g&&j()},disabled:!c,className:"w-full px-3 py-2 bg-gray-800 text-gray-300 text-xs rounded border border-gray-600 hover:bg-gray-700 hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Refresh Status"})})]})},O=()=>{const{sendMessage:r,isConnected:g}=$(),[m,y]=a.useState("demo-room"),[o,c]=a.useState("Demo User"),u=n=>{r({type:n,message:{info:"This is an informational message from the demo.",success:"Operation completed successfully!",warning:"Please be aware of this important notice.",error:"An error occurred while processing your request."}[n],data:{source:"demo",timestamp:Date.now()}})};return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-red-500 mb-4",children:"Real-time Features Demo"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Experience the power of Socket.IO real-time communication in your documentation site."})]}),e.jsx("div",{className:"mb-8 p-4 bg-gray-800 rounded-lg border border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-lg font-semibold",children:g?"Connected to Real-time Server":"Disconnected"})]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Socket.IO WebSocket Connection"})]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-semibold text-red-400 mb-4",children:"Demo Controls"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-3",children:"Chat Configuration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Room ID"}),e.jsx("input",{type:"text",value:m,onChange:n=>y(n.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500",placeholder:"Enter room ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"User Name"}),e.jsx("input",{type:"text",value:o,onChange:n=>c(n.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500",placeholder:"Enter your name"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-3",children:"Test Notifications"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>u("info"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Info"}),e.jsx("button",{onClick:()=>u("success"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Success"}),e.jsx("button",{onClick:()=>u("warning"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors duration-200",children:"Warning"}),e.jsx("button",{onClick:()=>u("error"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",children:"Error"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"h-96",children:e.jsx(I,{roomId:m,userName:o,showOnlineUsers:!0,className:"h-full"})})}),e.jsx("div",{children:e.jsx(M,{showMetrics:!0,showConnectionInfo:!0,refreshInterval:3e3,className:"h-96"})})]}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx("div",{className:"text-red-400 text-2xl mb-3"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Real-time Chat"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Collaborative messaging with typing indicators, online user status, and room-based conversations."})]}),e.jsxs("div",{className:"p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx("div",{className:"text-red-400 text-2xl mb-3"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Live Notifications"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Instant notifications for system events, user actions, and important updates with auto-dismiss."})]}),e.jsxs("div",{className:"p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx("div",{className:"text-red-400 text-2xl mb-3"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"System Monitoring"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Real-time system metrics, connection status, and performance monitoring with visual indicators."})]})]}),e.jsxs("div",{className:"mt-12 p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-semibold text-red-400 mb-4",children:"Technical Implementation"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-3",children:"Frontend Features"}),e.jsxs("ul",{className:"text-gray-300 text-sm space-y-2",children:[e.jsx("li",{children:"• Socket.IO client with automatic reconnection"}),e.jsx("li",{children:"• React Context for global state management"}),e.jsx("li",{children:"• Custom hooks for real-time functionality"}),e.jsx("li",{children:"• Responsive UI with red and black theme"}),e.jsx("li",{children:"• TypeScript for type safety"}),e.jsx("li",{children:"• Error handling and fallback states"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-3",children:"Real-time Capabilities"}),e.jsxs("ul",{className:"text-gray-300 text-sm space-y-2",children:[e.jsx("li",{children:"• WebSocket and polling transport fallback"}),e.jsx("li",{children:"• Room-based messaging and broadcasting"}),e.jsx("li",{children:"• Typing indicators and user presence"}),e.jsx("li",{children:"• System metrics and health monitoring"}),e.jsx("li",{children:"• Event-driven architecture"}),e.jsx("li",{children:"• Scalable connection management"})]})]})]})]})]})})};export{O as default};
