import{b as M,j as t,a as e,c as U}from"./main-de056cc1.js";import{r as n}from"./vendor-3c8011bb.js";import"./router-efb9e7eb.js";const O=({roomId:a="default",userName:x="Anonymous",maxMessages:u=100,showOnlineUsers:N=!0,className:m=""})=>{const{messages:d,sendMessage:h,onlineUsers:i,isTyping:C,sendTypingIndicator:o,joinRoom:j,leaveRoom:T,isConnected:g}=M(),[f,D]=n.useState([]),[p,v]=n.useState(""),[k,w]=n.useState(!1),$=n.useRef(null),y=n.useRef();n.useEffect(()=>{g&&j(a)},[g,a,j]),n.useEffect(()=>()=>{g&&T(a)},[g,a,T]),n.useEffect(()=>{const s=d.filter(l=>{var b;return((b=l.data)==null?void 0:b.roomId)===a||!a}).map(l=>{var b,E,I;return{id:l.id,userId:((b=l.data)==null?void 0:b.userId)||"system",userName:((E=l.data)==null?void 0:E.userName)||"System",message:l.message,timestamp:l.timestamp,isOwn:((I=l.data)==null?void 0:I.userId)==="current-user"}}).slice(-u);D(s)},[d,a,u]),n.useEffect(()=>{var s;(s=$.current)==null||s.scrollIntoView({behavior:"smooth"})},[f]);const r=s=>{v(s.target.value),k||(w(!0),o(!0)),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{w(!1),o(!1)},1e3)},c=s=>{s.preventDefault(),!(!p.trim()||!g)&&(h({type:"info",message:p,data:{roomId:a,userId:"current-user",userName:x,messageType:"chat"}}),v(""),w(!1),o(!1),y.current&&clearTimeout(y.current))},R=s=>new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),S=()=>Object.entries(C).filter(([s,l])=>l&&s!=="current-user").map(([s])=>{const l=i.find(b=>b.id===s);return(l==null?void 0:l.name)||"Someone"});return t("div",{className:`flex flex-col h-full bg-gray-900 border border-gray-700 rounded-lg ${m}`,children:[t("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-gray-800 rounded-t-lg",children:[t("div",{className:"flex items-center space-x-2",children:[e("div",{className:`w-2 h-2 rounded-full ${g?"bg-green-500":"bg-red-500"}`}),e("h3",{className:"text-white font-semibold",children:"Real-time Chat"}),a!=="default"&&t("span",{className:"text-xs text-gray-400",children:["#",a]})]}),N&&t("div",{className:"text-xs text-gray-400",children:[i.length," online"]})]}),t("div",{className:"flex flex-1 min-h-0",children:[t("div",{className:"flex-1 flex flex-col",children:[t("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[f.length===0?e("div",{className:"text-center text-gray-500 py-8",children:e("p",{children:"No messages yet. Start the conversation!"})}):f.map(s=>e("div",{className:`flex ${s.isOwn?"justify-end":"justify-start"}`,children:t("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${s.isOwn?"bg-red-600 text-white":"bg-gray-700 text-gray-100"}`,children:[!s.isOwn&&e("div",{className:"text-xs text-gray-300 mb-1",children:s.userName}),e("div",{className:"text-sm",children:s.message}),e("div",{className:`text-xs mt-1 ${s.isOwn?"text-red-200":"text-gray-400"}`,children:R(s.timestamp)})]})},s.id)),S().length>0&&e("div",{className:"flex justify-start",children:t("div",{className:"bg-gray-700 text-gray-300 px-4 py-2 rounded-lg text-sm italic",children:[S().join(", ")," ",S().length===1?"is":"are"," typing..."]})}),e("div",{ref:$})]}),e("div",{className:"p-4 border-t border-gray-700",children:t("form",{onSubmit:c,className:"flex space-x-2",children:[e("input",{type:"text",value:p,onChange:r,placeholder:g?"Type a message...":"Connecting...",disabled:!g,className:"flex-1 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500 disabled:opacity-50"}),e("button",{type:"submit",disabled:!p.trim()||!g,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Send"})]})})]}),N&&t("div",{className:"w-48 border-l border-gray-700 bg-gray-800 p-4",children:[e("h4",{className:"text-white font-semibold mb-3 text-sm",children:"Online Users"}),e("div",{className:"space-y-2",children:i.length===0?e("p",{className:"text-gray-500 text-xs",children:"No users online"}):i.map(s=>t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e("span",{className:"text-gray-300 text-sm truncate",children:s.name})]},s.id))})]})]})]})},L=({showMetrics:a=!0,showConnectionInfo:x=!0,refreshInterval:u=5e3,className:N=""})=>{const{socket:m,isConnected:d,emit:h,on:i,off:C}=U(),[o,j]=n.useState({cpu:0,memory:0,uptime:0,activeConnections:0,requestsPerSecond:0}),[T,g]=n.useState(new Date),[f,D]=n.useState({latency:0,protocol:"",transport:""}),p=()=>{d&&h("get_metrics")},v=()=>{if(d&&m){h("ping");const r=Date.now();m.once("pong",()=>{const c=Date.now()-r;D({latency:c,protocol:m.io.engine.protocol,transport:m.io.engine.transport.name})})}};n.useEffect(()=>m?(i("metrics",c=>{j(c),g(new Date)}),()=>{C("metrics")}):void 0,[m,i,C]),n.useEffect(()=>{if(!a)return;p();const r=setInterval(p,u);return()=>clearInterval(r)},[a,u,d]),n.useEffect(()=>{if(!x)return;v();const r=setInterval(v,u);return()=>clearInterval(r)},[x,u,d]);const k=(r,c)=>r>=c.critical?"text-red-500":r>=c.warning?"text-yellow-500":"text-green-500",w=(r,c)=>r>=c.critical?"ðŸ”´":r>=c.warning?"ðŸŸ¡":"ðŸŸ¢",$=r=>{const c=Math.floor(r/86400),R=Math.floor(r%86400/3600),S=Math.floor(r%3600/60);return c>0?`${c}d ${R}h`:R>0?`${R}h ${S}m`:`${S}m`},y=r=>r<100?`${r}ms`:r<1e3?`${(r/1e3).toFixed(1)}s`:`${(r/1e3).toFixed(2)}s`;return t("div",{className:`bg-gray-900 border border-gray-700 rounded-lg p-4 ${N}`,children:[t("div",{className:"flex items-center justify-between mb-4",children:[e("h3",{className:"text-white font-semibold text-sm",children:"System Status"}),t("div",{className:"flex items-center space-x-2",children:[e("div",{className:`w-2 h-2 rounded-full ${d?"bg-green-500":"bg-red-500"}`}),e("span",{className:"text-xs text-gray-400",children:d?"Connected":"Disconnected"})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x&&t("div",{className:"space-y-3",children:[e("h4",{className:"text-gray-300 font-medium text-xs uppercase tracking-wide",children:"Connection"}),t("div",{className:"space-y-2",children:[t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-gray-400 text-xs",children:"Latency"}),e("span",{className:`text-xs font-mono ${f.latency>1e3?"text-red-400":f.latency>500?"text-yellow-400":"text-green-400"}`,children:y(f.latency)})]}),t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-gray-400 text-xs",children:"Protocol"}),e("span",{className:"text-gray-300 text-xs",children:f.protocol})]}),t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-gray-400 text-xs",children:"Transport"}),e("span",{className:"text-gray-300 text-xs capitalize",children:f.transport})]})]})]}),a&&t("div",{className:"space-y-3",children:[e("h4",{className:"text-gray-300 font-medium text-xs uppercase tracking-wide",children:"Metrics"}),t("div",{className:"space-y-2",children:[t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-gray-400 text-xs",children:"CPU Usage"}),t("div",{className:"flex items-center space-x-2",children:[t("span",{className:`text-xs font-mono ${k(o.cpu,{warning:70,critical:90})}`,children:[o.cpu.toFixed(1),"%"]}),e("span",{className:"text-xs",children:w(o.cpu,{warning:70,critical:90})})]})]}),t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-gray-400 text-xs",children:"Memory Usage"}),t("div",{className:"flex items-center space-x-2",children:[t("span",{className:`text-xs font-mono ${k(o.memory,{warning:80,critical:95})}`,children:[o.memory.toFixed(1),"%"]}),e("span",{className:"text-xs",children:w(o.memory,{warning:80,critical:95})})]})]}),t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-gray-400 text-xs",children:"Uptime"}),e("span",{className:"text-gray-300 text-xs font-mono",children:$(o.uptime)})]}),t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-gray-400 text-xs",children:"Active Connections"}),e("span",{className:"text-gray-300 text-xs font-mono",children:o.activeConnections})]}),t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-gray-400 text-xs",children:"Requests/sec"}),e("span",{className:"text-gray-300 text-xs font-mono",children:o.requestsPerSecond.toFixed(1)})]})]})]})]}),e("div",{className:"mt-4 pt-3 border-t border-gray-700",children:t("div",{className:"flex justify-between items-center",children:[e("span",{className:"text-gray-500 text-xs",children:"Last Update"}),e("span",{className:"text-gray-400 text-xs",children:T.toLocaleTimeString()})]})}),e("div",{className:"mt-3",children:e("button",{onClick:()=>{a&&p(),x&&v()},disabled:!d,className:"w-full px-3 py-2 bg-gray-800 text-gray-300 text-xs rounded border border-gray-600 hover:bg-gray-700 hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Refresh Status"})})]})},A=()=>{const{sendMessage:a,isConnected:x}=M(),[u,N]=n.useState("demo-room"),[m,d]=n.useState("Demo User"),h=i=>{a({type:i,message:{info:"This is an informational message from the demo.",success:"Operation completed successfully!",warning:"Please be aware of this important notice.",error:"An error occurred while processing your request."}[i],data:{source:"demo",timestamp:Date.now()}})};return e("div",{className:"min-h-screen bg-gray-900 text-white",children:t("div",{className:"container mx-auto px-4 py-8",children:[t("div",{className:"mb-8",children:[e("h1",{className:"text-4xl font-bold text-red-500 mb-4",children:"Real-time Features Demo"}),e("p",{className:"text-gray-300 text-lg",children:"Experience the power of Socket.IO real-time communication in your documentation site."})]}),e("div",{className:"mb-8 p-4 bg-gray-800 rounded-lg border border-gray-700",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center space-x-3",children:[e("div",{className:`w-3 h-3 rounded-full ${x?"bg-green-500":"bg-red-500"}`}),e("span",{className:"text-lg font-semibold",children:x?"Connected to Real-time Server":"Disconnected"})]}),e("div",{className:"text-sm text-gray-400",children:"Socket.IO WebSocket Connection"})]})}),t("div",{className:"mb-8 p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e("h2",{className:"text-2xl font-semibold text-red-400 mb-4",children:"Demo Controls"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[e("h3",{className:"text-lg font-medium text-gray-300 mb-3",children:"Chat Configuration"}),t("div",{className:"space-y-3",children:[t("div",{children:[e("label",{className:"block text-sm text-gray-400 mb-1",children:"Room ID"}),e("input",{type:"text",value:u,onChange:i=>N(i.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500",placeholder:"Enter room ID"})]}),t("div",{children:[e("label",{className:"block text-sm text-gray-400 mb-1",children:"User Name"}),e("input",{type:"text",value:m,onChange:i=>d(i.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-red-500",placeholder:"Enter your name"})]})]})]}),t("div",{children:[e("h3",{className:"text-lg font-medium text-gray-300 mb-3",children:"Test Notifications"}),t("div",{className:"grid grid-cols-2 gap-2",children:[e("button",{onClick:()=>h("info"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Info"}),e("button",{onClick:()=>h("success"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Success"}),e("button",{onClick:()=>h("warning"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors duration-200",children:"Warning"}),e("button",{onClick:()=>h("error"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",children:"Error"})]})]})]})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e("div",{className:"lg:col-span-2",children:e("div",{className:"h-96",children:e(O,{roomId:u,userName:m,showOnlineUsers:!0,className:"h-full"})})}),e("div",{children:e(L,{showMetrics:!0,showConnectionInfo:!0,refreshInterval:3e3,className:"h-96"})})]}),t("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("div",{className:"p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e("div",{className:"text-red-400 text-2xl mb-3",children:"ðŸ’¬"}),e("h3",{className:"text-xl font-semibold text-white mb-2",children:"Real-time Chat"}),e("p",{className:"text-gray-300 text-sm",children:"Collaborative messaging with typing indicators, online user status, and room-based conversations."})]}),t("div",{className:"p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e("div",{className:"text-red-400 text-2xl mb-3",children:"ðŸ””"}),e("h3",{className:"text-xl font-semibold text-white mb-2",children:"Live Notifications"}),e("p",{className:"text-gray-300 text-sm",children:"Instant notifications for system events, user actions, and important updates with auto-dismiss."})]}),t("div",{className:"p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e("div",{className:"text-red-400 text-2xl mb-3",children:"ðŸ“Š"}),e("h3",{className:"text-xl font-semibold text-white mb-2",children:"System Monitoring"}),e("p",{className:"text-gray-300 text-sm",children:"Real-time system metrics, connection status, and performance monitoring with visual indicators."})]})]}),t("div",{className:"mt-12 p-6 bg-gray-800 rounded-lg border border-gray-700",children:[e("h2",{className:"text-2xl font-semibold text-red-400 mb-4",children:"Technical Implementation"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[e("h3",{className:"text-lg font-medium text-gray-300 mb-3",children:"Frontend Features"}),t("ul",{className:"text-gray-300 text-sm space-y-2",children:[e("li",{children:"â€¢ Socket.IO client with automatic reconnection"}),e("li",{children:"â€¢ React Context for global state management"}),e("li",{children:"â€¢ Custom hooks for real-time functionality"}),e("li",{children:"â€¢ Responsive UI with red and black theme"}),e("li",{children:"â€¢ TypeScript for type safety"}),e("li",{children:"â€¢ Error handling and fallback states"})]})]}),t("div",{children:[e("h3",{className:"text-lg font-medium text-gray-300 mb-3",children:"Real-time Capabilities"}),t("ul",{className:"text-gray-300 text-sm space-y-2",children:[e("li",{children:"â€¢ WebSocket and polling transport fallback"}),e("li",{children:"â€¢ Room-based messaging and broadcasting"}),e("li",{children:"â€¢ Typing indicators and user presence"}),e("li",{children:"â€¢ System metrics and health monitoring"}),e("li",{children:"â€¢ Event-driven architecture"}),e("li",{children:"â€¢ Scalable connection management"})]})]})]})]})]})})};export{A as default};
